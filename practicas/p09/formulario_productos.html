<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Registro de Productos</title>
        <style type="text/css">
            ol, ul { 
            list-style-type: none;
            }
            li {
            margin-bottom: 15px; /* espacio entre cada elemento */
            }
            label {
                display: inline-block;
                width: 150px;
            }
            input, select, textarea {
                padding: 5px;
                width: 250px;
            }
        </style>
    </head>
    <body>
        <h2>Registro de Productos</h2>

        <form id="formularioProductos" action="http://localhost/tecweb/practicas/p09/set_producto_v2.php" method="post">

            <ul>
                <li>
                    <label for="nombre">Nombre del producto:</label>
                    <input type="text" id="nombre" name="nombre" required>
                </li>

                <li>
                    <label for="marca">Marca:</label>
                    <select id="marca" name="marca" required>
                        <option value="">Seleccione una marca</option>
                        <option value="Apple">Apple</option>
                        <option value="Samsung">Samsung</option>
                        <option value="Xiaomi">Xiaomi</option>
                        <option value="OPPO">Motorola</option>
                        <option value="Huawei">Huawei</option>
                    </select>
                </li>

                <li>
                    <label for="modelo">Modelo:</label>
                    <input type="text" id="modelo" name="modelo" required>
                </li>

                <li>
                    <label for="precio">Precio:</label>
                    <input type="number" id="precio" name="precio" min="0" step="0.01" required>
                </li>

                <li>
                    <label for="detalles">Detalles:</label>
                    <textarea id="detalles" name="detalles" rows="3"></textarea>
                </li>

                <li>
                    <label for="unidades">Unidades:</label>
                    <input type="number" id="unidades" name="unidades" min="0" required>
                </li>

                <li>
                    <label for="imagen">Ruta de la imagen:</label>
                    <input type="text" id="imagen" name="imagen">
                </li>
            </ui>

            <p>
                <input type="submit" value="Enviar">
                <input type="reset">
            </p>
        
        </form>

        <script>
            document.getElementById('formularioProductos').addEventListener('submit', function(event) {
                let nombre = document.getElementById('nombre').value.trim();
                let marca = document.getElementById('marca').value;
                let modelo = document.getElementById('modelo').value.trim();
                let precio = parseFloat(document.getElementById('precio').value);
                let detalles = document.getElementById('detalles').value.trim();
                let unidades = parseInt(document.getElementById('unidades').value);
                let imagen = document.getElementById('imagen');
                
                //validar nombre
                if(nombre == '' || nombre.length > 100){
                    alert('El nombre es requerido y debe tener 100 caracteres o menos');
                    event.preventDefault;
                    return;
                }

                //validar marca
                if (marca === '') {
                    alert('Debe seleccionar una marca.');
                    event.preventDefault();
                    return;
                }

                //validar modelo
                let modeloRegex = /^[a-zA-Z0-9\s-]+$/; // alfanumérico + espacio y guión
                if (modelo === '' || modelo.length > 25 || !modeloRegex.test(modelo)) {
                    alert('El modelo es requerido, debe ser alfanumérico y tener 25 caracteres o menos.');
                    event.preventDefault();
                    return;
                }

                //validar precio
                if (isNaN(precio) || precio <= 99.99) {
                    alert('El precio es requerido y debe ser mayor a 99.99.');
                    event.preventDefault();
                    return;
                }

                //validar detalles
                if (detalles.length > 250) {
                    alert('Los detalles deben tener 250 caracteres o menos.');
                    event.preventDefault();
                    return;
                }

                // Validar unidades
                if (isNaN(unidades) || unidades < 0) {
                    alert('Las unidades son requeridas y deben ser un número mayor o igual a 0.');
                    event.preventDefault();
                    return;
                }

                // Ruta de imagen (opcional)
                if (imagen.value.trim() === '') {
                    imagen.value = 'img/default.png';
                }
            });
        </script>
    </body>
</html>
